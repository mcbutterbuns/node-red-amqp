<script type="text/x-red" data-template-name="amqp">
  <div class="form-row">
    <label for="node-input-host"><i class="icon-glob"></i>AMQP Host</label>
    <input type="text" id="node-input-host" placeholder="">
  </div>
  <div class="form-row">
    <label for="node-input-vhost">VHost</label>
    <input type="text" id="node-input-vhost" placeholder="VHost">
  </div>
  <div class="form-row">
      <label for="node-input-port">Port</label>
      <input type="text" id="node-input-port" placeholder="Port">
  </div>
  <div class="form-row">
    <label for="node-input-username">Username</label>
    <input type="text" id="node-input-username" placeholder="Username">
  </div>
  <div class="form-row">
    <label for="node-input-password">Password</label>
    <input type="password" id="node-input-password" placeholder="Password">
  </div>

  <br />
  <div class="form-row">
    <label for="node-input-ex">Exchange</label>
    <input type="text" id="node-input-ex" placeholder="Exchange">
  </div>
  <div class="form-row">
    <label for="node-input-queue">Queue</label>
    <input type="text" id="node-input-queue" placeholder="Queue">
  </div>
  <div class="form-row">
    <label for="node-input-queue_routing_key">Queue Routing Key</label>
    <input type="text" id="node-input-queue_routing_key" placeholder="Queue Routing Key">
  </div>
  <div class="form-row">
    <label for="node-input-queue_durable">Queue Durable</label>
    <input type="text" id="node-input-queue_durable" placeholder="Queue Durable">
  </div>
</script>

<script type="text/x-red" data-help-name="amqp">
  <p>Subscribe to AMQP messages.</p>
</script>

<script type="text/javascript">
RED.nodes.registerType('amqp',{
  category: 'input',      // the palette category
  defaults: {             // defines the editable properties of the node
    host: {value: '', required: true},
    port: {value: '5672', required: true},
    username: {value: 'Guest', required: true},
    password: {value: 'Guest', required: true},
    vhost: {value: '/', required: true},
    queue: {value: '', required: true},
    queue_durable: {value: 'true', required: true},
    queue_routing_key: {value: 'node-red', required: false},
    ex: {value: 'amq.direct', required: true},
    ex_type: {value: 'direct', required: true}
  },
  color: "#B24317",
  inputs:0,               // set the number of inputs - only 0 or 1
  outputs:1,              // set the number of outputs - 0 to n
  // set the icon (held in icons dir below where you save the node)
  label: function() {     // sets the default label contents
    return this.name||"Watch";
  },
  labelStyle: function() { // sets the class to apply to the label
    return this.name?"node_label_italic":"";
  }
});
</script>
